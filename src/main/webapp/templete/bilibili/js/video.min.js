!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(m){function l(v){var p=v||window.event,a=n.call(arguments,1),c=0,y=0,A=0,s=0,w=0,e=0;if(v=m.event.fix(p),v.type="mousewheel","detail" in p&&(A=-1*p.detail),"wheelDelta" in p&&(A=p.wheelDelta),"wheelDeltaY" in p&&(A=p.wheelDeltaY),"wheelDeltaX" in p&&(y=-1*p.wheelDeltaX),"axis" in p&&p.axis===p.HORIZONTAL_AXIS&&(y=-1*A,A=0),c=0===A?y:A,"deltaY" in p&&(A=-1*p.deltaY,c=A),"deltaX" in p&&(y=p.deltaX,0===A&&(c=-1*y)),0!==A||0!==y){if(1===p.deltaMode){var z=m.data(this,"mousewheel-line-height"),c=c*z,A=A*z,y=y*z}else{2===p.deltaMode&&(z=m.data(this,"mousewheel-page-height"),c*=z,A*=z,y*=z)}if(s=Math.max(Math.abs(A),Math.abs(y)),(!h||h>s)&&(h=s,o.settings.adjustOldDeltas&&("mousewheel"===p.type&&0===s%120)&&(h/=40)),o.settings.adjustOldDeltas&&("mousewheel"===p.type&&0===s%120)&&(c/=40,y/=40,A/=40),c=Math[1<=c?"floor":"ceil"](c/h),y=Math[1<=y?"floor":"ceil"](y/h),A=Math[1<=A?"floor":"ceil"](A/h),o.settings.normalizeOffset&&this.getBoundingClientRect){p=this.getBoundingClientRect(),w=v.clientX-p.left,e=v.clientY-p.top}return v.deltaX=y,v.deltaY=A,v.deltaFactor=h,v.offsetX=w,v.offsetY=e,v.deltaMode=0,a.unshift(v,c,y,A),j&&clearTimeout(j),j=setTimeout(k,200),(m.event.dispatch||m.event.handle).apply(this,a)}}function k(){h=null}var j,h,d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel" in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],n=Array.prototype.slice;if(m.event.fixHooks){for(var i=d.length;i;){m.event.fixHooks[d[--i]]=m.event.mouseHooks}}var o=m.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var a=f.length;a;){this.addEventListener(f[--a],l,!1)}}else{this.onmousewheel=l}m.data(this,"mousewheel-line-height",o.getLineHeight(this));m.data(this,"mousewheel-page-height",o.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=f.length;a;){this.removeEventListener(f[--a],l,!1)}}else{this.onmousewheel=null}m.removeData(this,"mousewheel-line-height");m.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){a=m(a);var e=a["offsetParent" in m.fn?"offsetParent":"parent"]();return e.length||(e=m("body")),parseInt(e.css("fontSize"),10)||parseInt(a.css("fontSize"),10)||16},getPageHeight:function(a){return m(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};m.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});!function(b){"undefined"!=typeof module&&module.exports?module.exports=b:b(jQuery,window,document)}(function(b){!function(a){var f="undefined"!=typeof module&&module.exports,d="https:"==document.location.protocol?"https:":"http:";"function"==typeof define&&define.amd||(f?require("jquery-mousewheel")(b):b.event.special.mousewheel||b("head").append(decodeURI("%3Cscript src="+d+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js%3E%3C/script%3E")));a()}(function(){var an,am="mCS",al={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0,autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},aj=0,ah={},ai=window.attachEvent&&!window.addEventListener?1:0,ac=!1,ak="mCSB_dragger_onDrag mCSB_scrollTools_onDrag mCS_img_loaded mCS_disabled mCS_destroyed mCS_no_scrollbar mCS-autoHide mCS-dir-rtl mCS_no_scrollbar_y mCS_no_scrollbar_x mCS_y_hidden mCS_x_hidden mCSB_draggerContainer mCSB_buttonUp mCSB_buttonDown mCSB_buttonLeft mCSB_buttonRight".split(" "),ae={init:function(g){g=b.extend(!0,{},al,g);var e=C.call(this);if(g.live){var p=g.liveSelector||this.selector||".mCustomScrollbar",c=b(p);if("off"===g.live){return void l(p)}ah[p]=setTimeout(function(){c.mCustomScrollbar(g);"once"===g.live&&c.length&&l(p)},500)}else{l(p)}return g.setWidth=g.set_width?g.set_width:g.setWidth,g.setHeight=g.set_height?g.set_height:g.setHeight,g.axis=g.horizontalScroll?"x":"yx"===g.axis||"xy"===g.axis||"auto"===g.axis?"yx":"x"===g.axis||"horizontal"===g.axis?"x":"y",g.scrollInertia=0<g.scrollInertia&&17>g.scrollInertia?17:g.scrollInertia,"object"!=typeof g.mouseWheel&&1==g.mouseWheel&&(g.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),g.mouseWheel.scrollAmount=g.mouseWheelPixels?g.mouseWheelPixels:g.mouseWheel.scrollAmount,g.mouseWheel.normalizeDelta=g.advanced.normalizeMouseWheelDelta?g.advanced.normalizeMouseWheelDelta:g.mouseWheel.normalizeDelta,g.scrollButtons.scrollType="stepped"===g.scrollButtons.scrollType||"pixels"===g.scrollButtons.scrollType||"step"===g.scrollButtons.scrollType||"click"===g.scrollButtons.scrollType?"stepped":"stepless",o(g),b(e).each(function(){var B=b(this);if(!B.data(am)){B.data(am,{idx:++aj,opt:g,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:B.css("direction"),cbOffsets:null,trigger:null});var w=B.data(am),x=w.opt,q=B.data("mcs-axis"),t=B.data("mcs-scrollbar-position"),r=B.data("mcs-theme");q&&(x.axis=q);t&&(x.scrollbarPosition=t);r&&(x.theme=r,o(x));var q=b(this),x=q.data(am),t=x.opt,r=t.autoExpandScrollbar?" "+ak[1]+"_expand":"",r=["<div id='mCSB_"+x.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+x.idx+"_scrollbar mCS-"+t.theme+" mCSB_scrollTools_vertical"+r+"'><div class='"+ak[12]+"'><div id='mCSB_"+x.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+x.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+x.idx+"_scrollbar mCS-"+t.theme+" mCSB_scrollTools_horizontal"+r+"'><div class='"+ak[12]+"'><div id='mCSB_"+x.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],v="yx"===t.axis?"mCSB_vertical_horizontal":"x"===t.axis?"mCSB_horizontal":"mCSB_vertical",r="yx"===t.axis?r[0]+r[1]:"x"===t.axis?r[1]:r[0],D="yx"===t.axis?"<div id='mCSB_"+x.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",I=t.autoHideScrollbar?" "+ak[6]:"",u="x"!==t.axis&&"rtl"===x.langDir?" "+ak[7]:"";t.setWidth&&q.css("width",t.setWidth);t.setHeight&&q.css("height",t.setHeight);t.setLeft="y"!==t.axis&&"rtl"===x.langDir?"989999px":t.setLeft;q.addClass("mCustomScrollbar _"+am+"_"+x.idx+I+u).wrapInner("<div id='mCSB_"+x.idx+"' class='mCustomScrollBox mCS-"+t.theme+" "+v+"'><div id='mCSB_"+x.idx+"_container' class='mCSB_container' style='position:relative; top:"+t.setTop+"; left:"+t.setLeft+";' dir="+x.langDir+" /></div>");v=b("#mCSB_"+x.idx);I=b("#mCSB_"+x.idx+"_container");"y"===t.axis||t.advanced.autoExpandHorizontalScroll||I.css("width",H(I.children()));"outside"===t.scrollbarPosition?("static"===q.css("position")&&q.css("position","relative"),q.css("overflow","visible"),v.addClass("mCSB_outside").after(r)):(v.addClass("mCSB_inside").append(r),I.wrap(D));t=b(this).data(am);q=t.opt;t=b(".mCSB_"+t.idx+"_scrollbar:first");r=j(q.scrollButtons.tabindex)?"tabindex='"+q.scrollButtons.tabindex+"'":"";r=["<a href='#' class='"+ak[13]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+ak[14]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+ak[15]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+ak[16]+"' oncontextmenu='return false;' "+r+" />"];r=["x"===q.axis?r[2]:r[0],"x"===q.axis?r[3]:r[1],r[2],r[3]];q.scrollButtons.enable&&t.prepend(r[0]).append(r[1]).next(".mCSB_scrollTools").prepend(r[2]).append(r[3]);x=[b("#mCSB_"+x.idx+"_dragger_vertical"),b("#mCSB_"+x.idx+"_dragger_horizontal")];x[0].css("min-height",x[0].height());x[1].css("min-width",x[1].width());b("#mCSB_"+w.idx+"_container img:not(."+ak[2]+")").addClass(ak[2]);ae.update.call(null,B)}})},update:function(e,c){var g=e||C.call(this);return b(g).each(function(){var w=b(this);if(w.data(am)){var D=w.data(am),u=D.opt,r=b("#mCSB_"+D.idx+"_container"),B=[b("#mCSB_"+D.idx+"_dragger_vertical"),b("#mCSB_"+D.idx+"_dragger_horizontal")];if(r.length){D.tweenRunning&&z(w);w.hasClass(ak[3])&&w.removeClass(ak[3]);w.hasClass(ak[4])&&w.removeClass(ak[4]);var v=b(this),t=v.data(am),t=b("#mCSB_"+t.idx),x=v.css("max-height")||"none",q=-1!==x.indexOf("%"),I=v.css("box-sizing");"none"!==x&&(x=q?v.parent().height()*parseInt(x)/100:parseInt(x),"border-box"===I&&(x-=v.innerHeight()-v.height()+(v.outerHeight()-v.innerHeight())),t.css("max-height",Math.round(x)));t=b(this).data(am);v=t.opt;t=b("#mCSB_"+t.idx+"_container");v.advanced.autoExpandHorizontalScroll&&"y"!==v.axis&&t.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(t[0].getBoundingClientRect().right+0.4)-Math.floor(t[0].getBoundingClientRect().left),position:"relative"}).unwrap();"y"===u.axis||u.advanced.autoExpandHorizontalScroll||r.css("width",H(r.children()));I=b(this).data(am);v=b("#mCSB_"+I.idx);x=b("#mCSB_"+I.idx+"_container");t=null==I.overflowed?x.height():x.outerHeight(!1);I=null==I.overflowed?x.width():x.outerWidth(!1);v=[t>v.height(),I>v.width()];D.overflowed=v;n.call(this);u.autoDraggerLength&&(v=b(this).data(am),t=b("#mCSB_"+v.idx),I=b("#mCSB_"+v.idx+"_container"),v=[b("#mCSB_"+v.idx+"_dragger_vertical"),b("#mCSB_"+v.idx+"_dragger_horizontal")],t=[t.height()/I.outerHeight(!1),t.width()/I.outerWidth(!1)],t=[parseInt(v[0].css("min-height")),Math.round(t[0]*v[0].parent().height()),parseInt(v[1].css("min-width")),Math.round(t[1]*v[1].parent().width())],I=ai&&t[3]<t[2]?t[2]:t[3],v[0].css({height:ai&&t[1]<t[0]?t[0]:t[1],"max-height":v[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":t[0]+"px"}),v[1].css({width:I,"max-width":v[1].parent().width()-10}));v=b(this).data(am);I=b("#mCSB_"+v.idx);x=b("#mCSB_"+v.idx+"_container");t=[b("#mCSB_"+v.idx+"_dragger_vertical"),b("#mCSB_"+v.idx+"_dragger_horizontal")];I=[x.outerHeight(!1)-I.height(),x.outerWidth(!1)-I.width()];t=[I[0]/(t[0].parent().height()-t[0].height()),I[1]/(t[1].parent().width()-t[1].width())];v.scrollRatio={y:t[0],x:t[1]};y.call(this);r=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];"x"!==u.axis&&(D.overflowed[0]?B[0].height()>B[0].parent().height()?ag.call(this):(F(w,r[0].toString(),{dir:"y",dur:0,overwrite:"none"}),D.contentReset.y=null):(ag.call(this),"y"===u.axis?A.call(this):"yx"===u.axis&&D.overflowed[1]&&F(w,r[1].toString(),{dir:"x",dur:0,overwrite:"none"})));"y"!==u.axis&&(D.overflowed[1]?B[1].width()>B[1].parent().width()?ag.call(this):(F(w,r[1].toString(),{dir:"x",dur:0,overwrite:"none"}),D.contentReset.x=null):(ag.call(this),"x"===u.axis?A.call(this):"yx"===u.axis&&D.overflowed[0]&&F(w,r[0].toString(),{dir:"y",dur:0,overwrite:"none"})));c&&D&&(2===c&&u.callbacks.onImageLoad&&"function"==typeof u.callbacks.onImageLoad?u.callbacks.onImageLoad.call(this):3===c&&u.callbacks.onSelectorChange&&"function"==typeof u.callbacks.onSelectorChange?u.callbacks.onSelectorChange.call(this):u.callbacks.onUpdate&&"function"==typeof u.callbacks.onUpdate&&u.callbacks.onUpdate.call(this));f.call(this)}}})},scrollTo:function(e,c){if("undefined"!=typeof e&&null!=e){var g=C.call(this);return b(g).each(function(){var u=b(this);if(u.data(am)){var r=u.data(am),p=r.opt,v=b.extend(!0,{},{trigger:"external",scrollInertia:p.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},c),t=G.call(this,e),q=0<v.scrollInertia&&17>v.scrollInertia?17:v.scrollInertia;t[0]=a.call(this,t[0],"y");t[1]=a.call(this,t[1],"x");v.moveDragger&&(t[0]*=r.scrollRatio.y,t[1]*=r.scrollRatio.x);v.dur=q;setTimeout(function(){null!==t[0]&&"undefined"!=typeof t[0]&&"x"!==p.axis&&r.overflowed[0]&&(v.dir="y",v.overwrite="all",F(u,t[0].toString(),v));null!==t[1]&&"undefined"!=typeof t[1]&&"y"!==p.axis&&r.overflowed[1]&&(v.dir="x",v.overwrite="none",F(u,t[1].toString(),v))},v.timeout)}})}},stop:function(){var c=C.call(this);return b(c).each(function(){var e=b(this);e.data(am)&&z(e)})},disable:function(e){var c=C.call(this);return b(c).each(function(){var g=b(this);g.data(am)&&(g.data(am),f.call(this,"remove"),A.call(this),e&&ag.call(this),n.call(this,!0),g.addClass(ak[3]))})},destroy:function(){var c=C.call(this);return b(c).each(function(){var p=b(this);if(p.data(am)){var t=p.data(am),g=t.opt,r=b("#mCSB_"+t.idx),q=b("#mCSB_"+t.idx+"_container"),u=b(".mCSB_"+t.idx+"_scrollbar");g.live&&l(g.liveSelector||b(c).selector);f.call(this,"remove");A.call(this);ag.call(this);p.removeData(am);s(this,"mcs");u.remove();q.find("img."+ak[2]).removeClass(ak[2]);r.replaceWith(q.contents());p.removeClass("mCustomScrollbar _"+am+"_"+t.idx+" "+ak[6]+" "+ak[7]+" "+ak[5]+" "+ak[3]).addClass(ak[4])}})}},C=function(){return"object"!=typeof b(this)||1>b(this).length?".mCustomScrollbar":this},o=function(c){c.autoDraggerLength=-1<b.inArray(c.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])?!1:c.autoDraggerLength;c.autoExpandScrollbar=-1<b.inArray(c.theme,"rounded-dots rounded-dots-dark 3d 3d-dark 3d-thick 3d-thick-dark inset inset-dark inset-2 inset-2-dark inset-3 inset-3-dark".split(" "))?!1:c.autoExpandScrollbar;c.scrollButtons.enable=-1<b.inArray(c.theme,["minimal","minimal-dark"])?!1:c.scrollButtons.enable;c.autoHideScrollbar=-1<b.inArray(c.theme,["minimal","minimal-dark"])?!0:c.autoHideScrollbar;c.scrollbarPosition=-1<b.inArray(c.theme,["minimal","minimal-dark"])?"outside":c.scrollbarPosition},l=function(c){ah[c]&&(clearTimeout(ah[c]),s(ah,c))},H=function(c){return Math.max.apply(Math,c.map(function(){return b(this).outerWidth(!0)}).get())},ab=function(g,e,p){p=p?ak[0]+"_expanded":"";var q=g.closest(".mCSB_scrollTools");"active"===e?(g.toggleClass(ak[0]+" "+p),q.toggleClass(ak[1]),g[0]._draggable=g[0]._draggable?0:1):g[0]._draggable||("hide"===e?(g.removeClass(ak[0]),q.removeClass(ak[1])):(g.addClass(ak[0]),q.addClass(ak[1])))},ag=function(){var q=b(this),g=q.data(am),t=g.opt,c=b("#mCSB_"+g.idx),r=b("#mCSB_"+g.idx+"_container"),p=[b("#mCSB_"+g.idx+"_dragger_vertical"),b("#mCSB_"+g.idx+"_dragger_horizontal")];if(z(q),("x"!==t.axis&&!g.overflowed[0]||"y"===t.axis&&g.overflowed[0])&&(p[0].add(r).css("top",0),F(q,"_resetY")),"y"!==t.axis&&!g.overflowed[1]||"x"===t.axis&&g.overflowed[1]){t=dx=0,"rtl"===g.langDir&&(t=c.width()-r.outerWidth(!1),dx=Math.abs(t/g.scrollRatio.x)),r.css("left",t),p[1].css("left",dx),F(q,"_resetX")}},y=function(){function p(){q=setTimeout(function(){b.event.special.mousewheel?(clearTimeout(q),d.call(g[0])):p()},100)}var g=b(this),r=g.data(am),c=r.opt;if(!r.bindEvents){if(S.call(this),c.contentTouchScroll&&M.call(this),i.call(this),c.mouseWheel.enable){var q;p()}aa.call(this);O.call(this);c.advanced.autoScrollOnFocus&&k.call(this);c.scrollButtons.enable&&ad.call(this);c.keyboard.enable&&P.call(this);r.bindEvents=!0}},A=function(){var q=b(this),g=q.data(am),t=g.opt,c=am+"_"+g.idx,r=".mCSB_"+g.idx+"_scrollbar",r=b("#mCSB_"+g.idx+",#mCSB_"+g.idx+"_container,#mCSB_"+g.idx+"_container_wrapper,"+r+" ."+ak[12]+",#mCSB_"+g.idx+"_dragger_vertical,#mCSB_"+g.idx+"_dragger_horizontal,"+r+">a"),p=b("#mCSB_"+g.idx+"_container");t.advanced.releaseDraggableSelectors&&r.add(b(t.advanced.releaseDraggableSelectors));g.bindEvents&&(b(document).unbind("."+c),r.each(function(){b(this).unbind("."+c)}),clearTimeout(q[0]._focusTimeout),s(q[0],"_focusTimeout"),clearTimeout(g.sequential.step),s(g.sequential,"step"),clearTimeout(p[0].onCompleteTimeout),s(p[0],"onCompleteTimeout"),g.bindEvents=!1)},n=function(q){var g=b(this),t=g.data(am),c=t.opt,r=b("#mCSB_"+t.idx+"_container_wrapper"),r=r.length?r:b("#mCSB_"+t.idx+"_container"),p=[b("#mCSB_"+t.idx+"_scrollbar_vertical"),b("#mCSB_"+t.idx+"_scrollbar_horizontal")],u=[p[0].find(".mCSB_dragger"),p[1].find(".mCSB_dragger")];"x"!==c.axis&&(t.overflowed[0]&&!q?(p[0].add(u[0]).add(p[0].children("a")).css("display","block"),r.removeClass(ak[8]+" "+ak[10])):(c.alwaysShowScrollbar?(2!==c.alwaysShowScrollbar&&u[0].css("display","none"),r.removeClass(ak[10])):(p[0].css("display","none"),r.addClass(ak[10])),r.addClass(ak[8])));"y"!==c.axis&&(t.overflowed[1]&&!q?(p[1].add(u[1]).add(p[1].children("a")).css("display","block"),r.removeClass(ak[9]+" "+ak[11])):(c.alwaysShowScrollbar?(2!==c.alwaysShowScrollbar&&u[1].css("display","none"),r.removeClass(ak[11])):(p[1].css("display","none"),r.addClass(ak[11])),r.addClass(ak[9])));t.overflowed[0]||t.overflowed[1]?g.removeClass(ak[5]):g.addClass(ak[5])},af=function(e){switch(e.type){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return e.target.ownerDocument!==document?[e.originalEvent.screenY,e.originalEvent.screenX,!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var c=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],g=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[c.screenY,c.screenX,1<g]:[c.pageY,c.pageX,1<g];default:return[e.pageY,e.pageX,!1]}},S=function(){function D(g){var e=q.find("iframe");e.length&&e.css("pointer-events",g?"auto":"none")}function K(g,r,N,p){if(q[0].idleTimer=233>B.scrollInertia?250:0,J.attr("id")===v[1]){var e="x";g=(J[0].offsetLeft-r+p)*t.scrollRatio.x}else{e="y",g=(J[0].offsetTop-g+N)*t.scrollRatio.y}F(w,g.toString(),{dir:e,drag:!0})}var J,u,I,w=b(this),t=w.data(am),B=t.opt,x=am+"_"+t.idx,v=["mCSB_"+t.idx+"_dragger_vertical","mCSB_"+t.idx+"_dragger_horizontal"],q=b("#mCSB_"+t.idx+"_container"),c=b("#"+v[0]+",#"+v[1]),L=B.advanced.releaseDraggableSelectors?c.add(b(B.advanced.releaseDraggableSelectors)):c;c.bind("mousedown."+x+" touchstart."+x+" pointerdown."+x+" MSPointerDown."+x,function(e){if(e.stopImmediatePropagation(),e.preventDefault(),!e.which||1===e.which){ac=!0;ai&&(document.onselectstart=function(){return !1});D(!1);z(w);J=b(this);var r=J.offset(),p=af(e)[0]-r.top;e=af(e)[1]-r.left;var g=J.height()+r.top,r=J.width()+r.left;g>p&&0<p&&r>e&&0<e&&(u=p,I=e);ab(J,"active",B.autoExpandScrollbar)}}).bind("touchmove."+x,function(e){e.stopImmediatePropagation();e.preventDefault();var g=J.offset(),p=af(e)[0]-g.top;e=af(e)[1]-g.left;K(u,I,p,e)});b(document).bind("mousemove."+x+" pointermove."+x+" MSPointerMove."+x,function(e){if(J){var g=J.offset(),p=af(e)[0]-g.top;e=af(e)[1]-g.left;u!==p&&K(u,I,p,e)}}).add(L).bind("mouseup."+x+" touchend."+x+" pointerup."+x+" MSPointerUp."+x,function(e){J&&(ab(J,"active",B.autoExpandScrollbar),J=null);ac=!1;ai&&(document.onselectstart=null);D(!0)})},M=function(){function aI(e){if(!h(e)||ac||af(e)[2]){return void (an=0)}an=1;at=X=0;aA.removeClass("mCS_touch_action");var g=c.offset();aC=af(e)[0]-g.top;U=af(e)[1]-g.left;B=[af(e)[0],af(e)[1]]}function aJ(g){if(h(g)&&!ac&&!af(g)[2]&&(g.stopImmediatePropagation(),!at||X)){ay=m();var e=Z.offset(),p=af(g)[0]-e.top,e=af(g)[1]-e.left;if(av.push(p),Y.push(e),B[2]=Math.abs(af(g)[0]-B[0]),B[3]=Math.abs(af(g)[1]-B[1]),ax.overflowed[0]){var q=aq[0].parent().height()-aq[0].height(),q=0<aC-p&&p-aC>-(q*ax.scrollRatio.y)&&(2*B[3]<B[2]||"yx"===ar.axis)}if(ax.overflowed[1]){var r=aq[1].parent().width()-aq[1].width(),r=0<U-e&&e-U>-(r*ax.scrollRatio.x)&&(2*B[2]<B[3]||"yx"===ar.axis)}q||r?(g.preventDefault(),X=1):(at=1,aA.addClass("mCS_touch_action"));az="yx"===ar.axis?[aC-p,U-e]:"x"===ar.axis?[null,U-e]:[aC-p,null];c[0].idleTimer=250;ax.overflowed[0]&&aF(az[0],V,"mcsLinearOut","y","all",!0);ax.overflowed[1]&&aF(az[1],V,"mcsLinearOut","x",W,!0)}}function aK(e){if(!h(e)||ac||af(e)[2]){return void (an=0)}an=1;e.stopImmediatePropagation();z(aA);aB=m();var g=Z.offset();aG=af(e)[0]-g.top;aE=af(e)[1]-g.left;av=[];Y=[]}function aD(g){if(h(g)&&!ac&&!af(g)[2]){g.stopImmediatePropagation();at=X=0;aw=m();var e=Z.offset(),p=af(g)[0]-e.top,e=af(g)[1]-e.left;if(!(30<aw-ay)){ap=1000/(aw-aB);var q=(g=2.5>ap)?[av[av.length-2],Y[Y.length-2]]:[0,0];K=g?[p-q[0],e-q[1]]:[p-aG,e-aE];p=[Math.abs(K[0]),Math.abs(K[1])];ap=g?[Math.abs(K[0]/4),Math.abs(K[1]/4)]:[ap,ap];g=[Math.abs(c[0].offsetTop)-K[0]*aH(p[0]/ap[0],ap[0]),Math.abs(c[0].offsetLeft)-K[1]*aH(p[1]/ap[1],ap[1])];az="yx"===ar.axis?[g[0],g[1]]:"x"===ar.axis?[null,g[1]]:[g[0],null];au=[4*p[0]+ar.scrollInertia,4*p[1]+ar.scrollInertia];g=parseInt(ar.contentTouchScroll)||0;az[0]=p[0]>g?az[0]:0;az[1]=p[1]>g?az[1]:0;ax.overflowed[0]&&aF(az[0],au[0],"mcsEaseOut","y",W,!1);ax.overflowed[1]&&aF(az[1],au[1],"mcsEaseOut","x",W,!1)}}}function aH(g,e){var p=[1.5*e,2*e,e/1.5,e/2];return 90<g?4<e?p[0]:p[3]:60<g?3<e?p[3]:p[2]:30<g?8<e?p[1]:6<e?p[0]:4<e?e:p[2]:8<e?e:p[3]}function aF(g,e,q,r,t,p){g&&F(aA,g.toString(),{dur:e,scrollEasing:q,dir:r,overwrite:t,drag:p})}var aC,U,aG,aE,aB,ay,aw,K,ap,az,au,X,at,aA=b(this),ax=aA.data(am),ar=ax.opt,w=am+"_"+ax.idx,Z=b("#mCSB_"+ax.idx),c=b("#mCSB_"+ax.idx+"_container"),aq=[b("#mCSB_"+ax.idx+"_dragger_vertical"),b("#mCSB_"+ax.idx+"_dragger_horizontal")],av=[],Y=[],V=0,W="yx"===ar.axis?"none":"all",B=[],T=c.find("iframe"),u=["touchstart."+w+" pointerdown."+w+" MSPointerDown."+w,"touchmove."+w+" pointermove."+w+" MSPointerMove."+w,"touchend."+w+" pointerup."+w+" MSPointerUp."+w];c.bind(u[0],function(e){aI(e)}).bind(u[1],function(e){aJ(e)});Z.bind(u[0],function(e){aK(e)}).bind(u[2],function(e){aD(e)});T.length&&T.each(function(){b(this).load(function(){ao(this)&&b(this.contentDocument||this.contentWindow.document).bind(u[0],function(e){aI(e);aK(e)}).bind(u[1],function(e){aJ(e)}).bind(u[2],function(e){aD(e)})})})},i=function(){function w(g,e,p){t.type=p&&x?"stepped":"stepless";t.scrollAmount=10;Q(B,g,e,"mcsLinearOut",p?60:null)}var x,B=b(this),r=B.data(am),v=r.opt,t=r.sequential,q=am+"_"+r.idx,c=b("#mCSB_"+r.idx+"_container"),u=c.parent();c.bind("mousedown."+q,function(e){an||x||(x=1,ac=!0)}).add(document).bind("mousemove."+q,function(e){if(!an&&x&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var g=c.offset(),p=af(e)[0]-g.top+c[0].offsetTop;e=af(e)[1]-g.left+c[0].offsetLeft;0<p&&p<u.height()&&0<e&&e<u.width()?t.step&&w("off",null,"stepped"):("x"!==v.axis&&r.overflowed[0]&&(0>p?w("on",38):p>u.height()&&w("on",40)),"y"!==v.axis&&r.overflowed[1]&&(0>e?w("on",37):e>u.width()&&w("on",39)))}}).bind("mouseup."+q,function(e){an||(x&&(x=0,w("off",null)),ac=!1)})},d=function(){function q(L,e){z(v);var K=v,N=L.target,D=N.nodeName.toLowerCase(),K=K.data(am).opt.mouseWheel.disableOver,J=["select","textarea"];if(!(-1<b.inArray(D,K))||-1<b.inArray(D,J)&&!b(N).is(":focus")){D="auto"!==c.mouseWheel.deltaFactor?parseInt(c.mouseWheel.deltaFactor):ai&&100>L.deltaFactor?100:L.deltaFactor||100;if("x"===c.axis||"x"===c.mouseWheel.axis){var N="x",D=[Math.round(D*w.scrollRatio.x),parseInt(c.mouseWheel.scrollAmount)],D="auto"!==c.mouseWheel.scrollAmount?D[1]:D[0]>=r.width()?0.9*r.width():D[0],K=Math.abs(b("#mCSB_"+w.idx+"_container")[0].offsetLeft),J=x[1][0].offsetLeft,B=x[1].parent().width()-x[1].width(),I=L.deltaX||L.deltaY||e}else{N="y",D=[Math.round(D*w.scrollRatio.y),parseInt(c.mouseWheel.scrollAmount)],D="auto"!==c.mouseWheel.scrollAmount?D[1]:D[0]>=r.height()?0.9*r.height():D[0],K=Math.abs(b("#mCSB_"+w.idx+"_container")[0].offsetTop),J=x[0][0].offsetTop,B=x[0].parent().height()-x[0].height(),I=L.deltaY||e}"y"===N&&!w.overflowed[0]||"x"===N&&!w.overflowed[1]||((c.mouseWheel.invert||L.webkitDirectionInvertedFromDevice)&&(I=-I),c.mouseWheel.normalizeDelta&&(I=0>I?-1:1),(0<I&&0!==J||0>I&&J!==B||c.mouseWheel.preventDefault)&&(L.stopImmediatePropagation(),L.preventDefault()),F(v,(K-I*D).toString(),{dir:N}))}}if(b(this).data(am)){var v=b(this),w=v.data(am),c=w.opt,t=am+"_"+w.idx,r=b("#mCSB_"+w.idx),x=[b("#mCSB_"+w.idx+"_dragger_vertical"),b("#mCSB_"+w.idx+"_dragger_horizontal")],u=b("#mCSB_"+w.idx+"_container").find("iframe");u.length&&u.each(function(){b(this).load(function(){ao(this)&&b(this.contentDocument||this.contentWindow.document).bind("mousewheel."+t,function(e,g){q(e,g)})})});r.bind("mousewheel."+t,function(e,g){q(e,g)})}},ao=function(e){var c=null;try{c=(e.contentDocument||e.contentWindow.document).body.innerHTML}catch(g){}return null!==c},aa=function(){var g=b(this),r=g.data(am),t=am+"_"+r.idx,c=b("#mCSB_"+r.idx+"_container"),q=c.parent();b(".mCSB_"+r.idx+"_scrollbar ."+ak[12]).bind("touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(e){ac=!0}).bind("touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(e){ac=!1}).bind("click."+t,function(p){if(b(p.target).hasClass(ak[12])||b(p.target).hasClass("mCSB_draggerRail")){z(g);var u=b(this),e=u.find(".mCSB_dragger");if(0<u.parent(".mCSB_scrollTools_horizontal").length){if(!r.overflowed[1]){return}u="x";p=p.pageX>e.offset().left?-1:1;p=Math.abs(c[0].offsetLeft)-0.9*p*q.width()}else{if(!r.overflowed[0]){return}u="y";p=p.pageY>e.offset().top?-1:1;p=Math.abs(c[0].offsetTop)-0.9*p*q.height()}F(g,p.toString(),{dir:u,scrollEasing:"mcsEaseInOut"})}})},k=function(){var p=b(this),t=p.data(am),u=t.opt,c=am+"_"+t.idx,r=b("#mCSB_"+t.idx+"_container"),q=r.parent();r.bind("focusin."+c,function(v){var g=b(document.activeElement);v=r.find(".mCustomScrollBox").length;g.is(u.advanced.autoScrollOnFocus)&&(z(p),clearTimeout(p[0]._focusTimeout),p[0]._focusTimer=v?17*v:0,p[0]._focusTimeout=setTimeout(function(){var w=[E(g)[0],E(g)[1]],x=[r[0].offsetTop,r[0].offsetLeft],x=[0<=x[0]+w[0]&&x[0]+w[0]<q.height()-g.outerHeight(!1),0<=x[1]+w[1]&&x[0]+w[1]<q.width()-g.outerWidth(!1)],e="yx"!==u.axis||x[0]||x[1]?"all":"none";"x"===u.axis||x[0]||F(p,w[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:e,dur:0});"y"===u.axis||x[1]||F(p,w[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:e,dur:0})},p[0]._focusTimer))})},O=function(){var c=b(this).data(am),g=am+"_"+c.idx,p=b("#mCSB_"+c.idx+"_container").parent();p.bind("scroll."+g,function(e){0===p.scrollTop()&&0===p.scrollLeft()||b(".mCSB_"+c.idx+"_scrollbar").css("visibility","hidden")})},ad=function(){var p=b(this),r=p.data(am),t=r.opt,c=r.sequential,q=am+"_"+r.idx;b(".mCSB_"+r.idx+"_scrollbar>a").bind("mousedown."+q+" touchstart."+q+" pointerdown."+q+" MSPointerDown."+q+" mouseup."+q+" touchend."+q+" pointerup."+q+" MSPointerUp."+q+" mouseout."+q+" pointerout."+q+" MSPointerOut."+q+" click."+q,function(v){function e(g,w){c.scrollAmount=t.snapAmount||t.scrollButtons.scrollAmount;Q(p,g,w)}if(v.preventDefault(),!v.which||1===v.which){var u=b(this).attr("class");switch(c.type=t.scrollButtons.scrollType,v.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===c.type){break}ac=!0;r.tweenRunning=!1;e("on",u);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===c.type){break}ac=!1;c.dir&&e("off",u);break;case"click":if("stepped"!==c.type||r.tweenRunning){break}e("on",u)}}})},P=function(){function L(g){function q(N,r){I.type=w.keyboard.scrollType;I.scrollAmount=w.snapAmount||w.keyboard.scrollAmount;"stepped"===I.type&&K.tweenRunning||Q(J,N,r)}switch(g.type){case"blur":K.tweenRunning&&I.dir&&q("off",null);break;case"keydown":case"keyup":var e=g.keyCode?g.keyCode:g.which,p="on";if("x"!==w.axis&&(38===e||40===e)||"y"!==w.axis&&(37===e||39===e)){if((38===e||40===e)&&!K.overflowed[0]||(37===e||39===e)&&!K.overflowed[1]){break}"keyup"===g.type&&(p="off");b(document.activeElement).is(x)||(g.preventDefault(),g.stopImmediatePropagation(),q(p,e))}else{if(33===e||34===e){if((K.overflowed[0]||K.overflowed[1])&&(g.preventDefault(),g.stopImmediatePropagation()),"keyup"===g.type){z(J),e=34===e?-1:1,"x"===w.axis||"yx"===w.axis&&K.overflowed[1]&&!K.overflowed[0]?(g="x",e=Math.abs(u[0].offsetLeft)-0.9*e*D.width()):(g="y",e=Math.abs(u[0].offsetTop)-0.9*e*D.height()),F(J,e.toString(),{dir:g,scrollEasing:"mcsEaseInOut"})}}else{35!==e&&36!==e||(b(document.activeElement).is(x)||((K.overflowed[0]||K.overflowed[1])&&(g.preventDefault(),g.stopImmediatePropagation()),"keyup"!==g.type))||("x"===w.axis||"yx"===w.axis&&K.overflowed[1]&&!K.overflowed[0]?(g="x",e=35===e?Math.abs(D.width()-u.outerWidth(!1)):0):(g="y",e=35===e?Math.abs(D.height()-u.outerHeight(!1)):0),F(J,e.toString(),{dir:g,scrollEasing:"mcsEaseInOut"}))}}}}var J=b(this),K=J.data(am),w=K.opt,I=K.sequential,B=am+"_"+K.idx,v=b("#mCSB_"+K.idx),u=b("#mCSB_"+K.idx+"_container"),D=u.parent(),x="input,textarea,select,datalist,keygen,[contenteditable='true']",c=u.find("iframe"),t=["blur."+B+" keydown."+B+" keyup."+B];c.length&&c.each(function(){b(this).load(function(){ao(this)&&b(this.contentDocument||this.contentWindow.document).bind(t[0],function(e){L(e)})})});v.attr("tabindex","0").bind(t[0],function(e){L(e)})},Q=function(K,I,J,w,u){function B(p){var T="stepped"!==D.type,U=u?u:p?T?L/1.5:N:1000/60,r=p?T?7.5:40:2.5,q=[Math.abs(x[0].offsetTop),Math.abs(x[0].offsetLeft)],t=[10<v.scrollRatio.y?10:v.scrollRatio.y,10<v.scrollRatio.x?10:v.scrollRatio.x],r="x"===D.dir[0]?q[1]+D.dir[1]*t[1]*r:q[0]+D.dir[1]*t[0]*r,t="x"===D.dir[0]?q[1]+D.dir[1]*parseInt(D.scrollAmount):q[0]+D.dir[1]*parseInt(D.scrollAmount),r="auto"!==D.scrollAmount?t:r,T=w?w:p?T?"mcsLinearOut":"mcsEaseInOut":"mcsLinear";return p&&17>U&&(r="x"===D.dir[0]?q[1]:q[0]),F(K,r.toString(),{dir:D.dir[0],scrollEasing:T,dur:U,onComplete:p?!0:!1}),p?void (D.dir=!1):(clearTimeout(D.step),void (D.step=setTimeout(function(){B()},U)))}var v=K.data(am),c=v.opt,D=v.sequential,x=b("#mCSB_"+v.idx+"_container"),g="stepped"===D.type?!0:!1,L=26>c.scrollInertia?26:c.scrollInertia,N=1>c.scrollInertia?17:c.scrollInertia;switch(I){case"on":if(D.dir=[J===ak[16]||J===ak[15]||39===J||37===J?"x":"y",J===ak[13]||J===ak[15]||38===J||37===J?-1:1],z(K),j(J)&&"stepped"===D.type){break}B(g);break;case"off":clearTimeout(D.step),s(D,"step"),z(K),(g||v.tweenRunning&&D.dir)&&B(!0)}},G=function(c){var g=b(this).data(am).opt,p=[];return"function"==typeof c&&(c=c()),c instanceof Array?p=1<c.length?[c[0],c[1]]:"x"===g.axis?[null,c[0]]:[c[0],null]:(p[0]=c.y?c.y:c.x||"x"===g.axis?null:c,p[1]=c.x?c.x:c.y||"y"===g.axis?null:c),"function"==typeof p[0]&&(p[0]=p[0]()),"function"==typeof p[1]&&(p[1]=p[1]()),p},a=function(B,w){if(null!=B&&"undefined"!=typeof B){var x=b(this),r=x.data(am),v=r.opt,r=b("#mCSB_"+r.idx+"_container"),t=r.parent(),q=typeof B;w||(w="x"===v.axis?"x":"y");var v="x"===w?r.outerWidth(!1):r.outerHeight(!1),c="x"===w?r[0].offsetLeft:r[0].offsetTop,u="x"===w?"left":"top";switch(q){case"function":return B();case"object":x=B.jquery?B:b(B);if(!x.length){break}return"x"===w?E(x)[1]:E(x)[0];case"string":case"number":return j(B)?Math.abs(B):-1!==B.indexOf("%")?Math.abs(v*parseInt(B)/100):-1!==B.indexOf("-=")?Math.abs(c-parseInt(B.split("-=")[1])):-1!==B.indexOf("+=")?(x=c+parseInt(B.split("+=")[1]),0<=x?0:Math.abs(x)):-1!==B.indexOf("px")&&j(B.split("px")[0])?Math.abs(B.split("px")[0]):"top"===B||"left"===B?0:"bottom"===B?Math.abs(t.height()-r.outerHeight(!1)):"right"===B?Math.abs(t.width()-r.outerWidth(!1)):"first"===B||"last"===B?(x=r.find(":"+B),"x"===w?E(x)[1]:E(x)[0]):b(B).length?"x"===w?E(b(B))[1]:E(b(B))[0]:(r.css(u,B),void ae.update.call(null,x[0]))}}},f=function(ar){function ap(){return clearTimeout(X[0].autoUpdate),0===V.parents("html").length?void (V=null):void (X[0].autoUpdate=setTimeout(function(){return Z.advanced.updateOnSelectorChange&&(T=U(),T!==I)?(Y(3),void (I=T)):(Z.advanced.updateOnContentResize&&(J=[X.outerHeight(!1),X.outerWidth(!1),D.height(),D.width(),v()[0],v()[1]],(J[0]!==c[0]||J[1]!==c[1]||J[2]!==c[2]||J[3]!==c[3]||J[4]!==c[4]||J[5]!==c[5])&&(Y(J[0]!==c[0]||J[1]!==c[1]),c=J)),Z.advanced.updateOnImageLoad&&(K=aq(),K!==N&&(X.find("img").each(function(){W(this)}),N=K)),void ((Z.advanced.updateOnSelectorChange||Z.advanced.updateOnContentResize||Z.advanced.updateOnImageLoad)&&ap()))},Z.advanced.autoUpdateTimeout))}function aq(){var e=0;return Z.advanced.updateOnImageLoad&&(e=X.find("img").length),e}function W(e){if(b(e).hasClass(ak[2])){return void Y()}var p=new Image;p.onload=function(r,q){return function(){return q.apply(r,arguments)}}(p,function(){this.onload=null;b(e).addClass(ak[2]);Y(2)});p.src=e.src}function U(){!0===Z.advanced.updateOnSelectorChange&&(Z.advanced.updateOnSelectorChange="*");var e=0,p=X.find(Z.advanced.updateOnSelectorChange);return Z.advanced.updateOnSelectorChange&&0<p.length&&p.each(function(){e+=b(this).height()+b(this).width()}),e}function Y(e){clearTimeout(X[0].autoUpdate);ae.update.call(null,V[0],e)}var V=b(this),L=V.data(am),Z=L.opt,X=b("#mCSB_"+L.idx+"_container");if(ar){return clearTimeout(X[0].autoUpdate),void s(X[0],"autoUpdate")}var T,J,K,D=X.parent(),g=[b("#mCSB_"+L.idx+"_scrollbar_vertical"),b("#mCSB_"+L.idx+"_scrollbar_horizontal")],v=function(){return[g[0].is(":visible")?g[0].outerHeight(!0):0,g[1].is(":visible")?g[1].outerWidth(!0):0]},I=U(),c=[X.outerHeight(!1),X.outerWidth(!1),D.height(),D.width(),v()[0],v()[1]],N=aq();ap()},z=function(c){c=c.data(am);b("#mCSB_"+c.idx+"_container,#mCSB_"+c.idx+"_container_wrapper,#mCSB_"+c.idx+"_dragger_vertical,#mCSB_"+c.idx+"_dragger_horizontal").each(function(){this._mTween||(this._mTween={top:{},left:{}});for(var g=["top","left"],e=0;e<g.length;e++){var p=g[e];this._mTween[p].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(this._mTween[p].id):clearTimeout(this._mTween[p].id),this._mTween[p].id=null,this._mTween[p].stop=1)}})},F=function(aw,au,av){function at(e){return aq&&Z.callbacks[e]&&"function"==typeof Z.callbacks[e]}function Y(){var p=[ap[0].offsetTop,ap[0].offsetLeft],t=[J[0].offsetTop,J[0].offsetLeft],r=[ap.outerHeight(!1),ap.outerWidth(!1)],q=[ar.height(),ar.width()];aw[0].mcs={content:ap,top:p[0],left:p[1],draggerTop:t[0],draggerLeft:t[1],topPct:Math.round(100*Math.abs(p[0])/(Math.abs(r[0])-q[0])),leftPct:Math.round(100*Math.abs(p[1])/(Math.abs(r[1])-q[1])),direction:av.dir}}var aq=aw.data(am),Z=aq.opt;av=b.extend({trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:Z.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},av);var U=[av.dur,av.drag?0:av.dur],ar=b("#mCSB_"+aq.idx),ap=b("#mCSB_"+aq.idx+"_container"),W=ap.parent(),L=Z.callbacks.onTotalScrollOffset?G.call(aw,Z.callbacks.onTotalScrollOffset):[0,0],N=Z.callbacks.onTotalScrollBackOffset?G.call(aw,Z.callbacks.onTotalScrollBackOffset):[0,0];if(aq.trigger=av.trigger,(0!==W.scrollTop()||0!==W.scrollLeft())&&(b(".mCSB_"+aq.idx+"_scrollbar").css("visibility","visible"),W.scrollTop(0).scrollLeft(0)),"_resetY"!==au||aq.contentReset.y||(at("onOverflowYNone")&&Z.callbacks.onOverflowYNone.call(aw[0]),aq.contentReset.y=1),"_resetX"!==au||aq.contentReset.x||(at("onOverflowXNone")&&Z.callbacks.onOverflowXNone.call(aw[0]),aq.contentReset.x=1),"_resetY"!==au&&"_resetX"!==au){switch(!aq.contentReset.y&&aw[0].mcs||!aq.overflowed[0]||(at("onOverflowY")&&Z.callbacks.onOverflowY.call(aw[0]),aq.contentReset.x=null),!aq.contentReset.x&&aw[0].mcs||!aq.overflowed[1]||(at("onOverflowX")&&Z.callbacks.onOverflowX.call(aw[0]),aq.contentReset.x=null),Z.snapAmount&&(au=Math.round(au/Z.snapAmount)*Z.snapAmount-Z.snapOffset),av.dir){case"x":var J=b("#mCSB_"+aq.idx+"_dragger_horizontal"),x="left",I=ap[0].offsetLeft,K=[ar.width()-ap.outerWidth(!1),J.parent().width()-J.width()],c=[au,0===au?0:au/aq.scrollRatio.x],V=L[1],X=N[1],T=0<V?V/aq.scrollRatio.x:0,D=0<X?X/aq.scrollRatio.x:0;break;case"y":J=b("#mCSB_"+aq.idx+"_dragger_vertical"),x="top",I=ap[0].offsetTop,K=[ar.height()-ap.outerHeight(!1),J.parent().height()-J.height()],c=[au,0===au?0:au/aq.scrollRatio.y],V=L[0],X=N[0],T=0<V?V/aq.scrollRatio.y:0,D=0<X?X/aq.scrollRatio.y:0}0>c[1]||0===c[0]&&0===c[1]?c=[0,0]:c[1]>=K[1]?c=[K[0],K[1]]:c[0]=-c[0];aw[0].mcs||(Y(),at("onInit")&&Z.callbacks.onInit.call(aw[0]));clearTimeout(ap[0].onCompleteTimeout);!aq.tweenRunning&&(0===I&&0<=c[0]||I===K[0]&&c[0]<=K[0])||(R(J[0],x,Math.round(c[1]),U[1],av.scrollEasing),R(ap[0],x,Math.round(c[0]),U[0],av.scrollEasing,av.overwrite,{onStart:function(){av.callbacks&&av.onStart&&!aq.tweenRunning&&(at("onScrollStart")&&(Y(),Z.callbacks.onScrollStart.call(aw[0])),aq.tweenRunning=!0,ab(J),aq.cbOffsets=[Z.callbacks.alwaysTriggerOffsets||I>=K[0]+V,Z.callbacks.alwaysTriggerOffsets||-X>=I])},onUpdate:function(){av.callbacks&&av.onUpdate&&at("whileScrolling")&&(Y(),Z.callbacks.whileScrolling.call(aw[0]))},onComplete:function(){av.callbacks&&av.onComplete&&("yx"===Z.axis&&clearTimeout(ap[0].onCompleteTimeout),ap[0].onCompleteTimeout=setTimeout(function(){at("onScroll")&&(Y(),Z.callbacks.onScroll.call(aw[0]));at("onTotalScroll")&&c[1]>=K[1]-T&&aq.cbOffsets[0]&&(Y(),Z.callbacks.onTotalScroll.call(aw[0]));at("onTotalScrollBack")&&c[1]<=D&&aq.cbOffsets[1]&&(Y(),Z.callbacks.onTotalScrollBack.call(aw[0]));aq.tweenRunning=!1;ap[0].idleTimer=0;ab(J,"hide")},ap[0].idleTimer||0))}}))}},R=function(ax,aw,au,av,at,ar,Z){function Y(){X.stop||(K||T.call(),K=m()-I,aq(),K>=X.time&&(X.time=K>X.time?K+U-(K-X.time):K+U-1,X.time<K+1&&(X.time=K+1)),X.time<av?X.id=W(Y):L.call())}function aq(){0<av?(X.currVal=ap(X.time,D,V,av,at),J[aw]=Math.round(X.currVal)+"px"):J[aw]=au+"px";N.call()}function ap(g,e,p,q,r){switch(r){case"linear":case"mcsLinear":return p*g/q+e;case"mcsLinearOut":return g/=q,g--,p*Math.sqrt(1-g*g)+e;case"easeInOutSmooth":return g/=q/2,1>g?p/2*g*g+e:(g--,-p/2*(g*(g-2)-1)+e);case"easeInOutStrong":return g/=q/2,1>g?p/2*Math.pow(2,10*(g-1))+e:(g--,p/2*(-Math.pow(2,-10*g)+2)+e);case"easeInOut":case"mcsEaseInOut":return g/=q/2,1>g?p/2*g*g*g+e:(g-=2,p/2*(g*g*g+2)+e);case"easeOutSmooth":return g/=q,g--,-p*(g*g*g*g-1)+e;case"easeOutStrong":return p*(-Math.pow(2,-10*g/q)+1)+e;default:return q=(g/=q)*g,r=q*g,e+p*(0.499999999999997*r*q+-2.5*q*q+5.5*r+-6.5*q+4*g)}}ax._mTween||(ax._mTween={top:{},left:{}});var U,W;Z=Z||{};var T=Z.onStart||function(){},N=Z.onUpdate||function(){},L=Z.onComplete||function(){},I=m(),K=0,D=ax.offsetTop,J=ax.style,X=ax._mTween[aw];"left"===aw&&(D=ax.offsetLeft);var V=au-D;X.stop=0;"none"!==ar&&null!=X.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(X.id):clearTimeout(X.id),X.id=null);(function(){U=1000/60;X.time=K+U;W=window.requestAnimationFrame?window.requestAnimationFrame:function(c){return aq(),setTimeout(c,0.01)};X.id=W(Y)})()},m=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},s=function(e,c){try{delete e[c]}catch(g){e[c]=null}},h=function(c){c=c.originalEvent.pointerType;return !(c&&"touch"!==c&&2!==c)},j=function(c){return !isNaN(parseFloat(c))&&isFinite(c)},E=function(e){var c=e.parents(".mCSB_container");return[e.offset().top-c.offset().top,e.offset().left-c.offset().left]};b.fn.mCustomScrollbar=function(c){return ae[c]?ae[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void b.error("Method "+c+" does not exist"):ae.init.apply(this,arguments)};b.mCustomScrollbar=function(c){return ae[c]?ae[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void b.error("Method "+c+" does not exist"):ae.init.apply(this,arguments)};b.mCustomScrollbar.defaults=al;window.mCustomScrollbar=!0;b(window).load(function(){b(".mCustomScrollbar").mCustomScrollbar();b.extend(b.expr[":"],{mcsInView:b.expr[":"].mcsInView||function(g){var r,q;g=b(g);var p=g.parents(".mCSB_container");if(p.length){return r=p.parent(),q=[p[0].offsetTop,p[0].offsetLeft],0<=q[0]+E(g)[0]&&q[0]+E(g)[0]<r.height()-g.outerHeight(!1)&&0<=q[1]+E(g)[1]&&q[1]+E(g)[1]<r.width()-g.outerWidth(!1)}},mcsOverflow:b.expr[":"].mcsOverflow||function(c){if(c=b(c).data(am)){return c.overflowed[0]||c.overflowed[1]}}})})})});window.rec_rp=window.rec_rp||function(){(rec_rp.q=rec_rp.q||[]).push(arguments)};function player_fullwin(f){!1==f&&$("#bofqi").removeClass("wide");if(!1!=f||null!==ff_embed_stack){if(null===ff_embed_stack){ff_embed_stack=[];ff_embed_stack_style=[];var d=$("#bofqi").get(0);do{$(d).attr("embed_stack",!0),ff_embed_stack.push(d)}while(d=d.parentNode)}f?($(".rklist").hide(),$("#bofqi").addClass("webfullscreen")):($(".rklist").show(),$("#bofqi").removeClass("webfullscreen"));var d=$("div").not("#bofqi div"),h;for(h in d){if(d[h]&&d[h].getAttribute&&!d[h].getAttribute("embed_stack")&&d[h]&&d[h].style){var g;d[h].getAttribute("ff_id")?g=ff_status[d[h].getAttribute("ff_id")]:(ff_status_id++,d[h].setAttribute("ff_id",ff_status_id),ff_status[ff_status_id]=d[h].style.display);d[h].style.display=f?"none":g}}for(h in ff_embed_stack){(d=ff_embed_stack[h])&&d.style&&(ff_embed_stack_style[h]||(ff_embed_stack_style[h]={position:d.style.position,width:d.style.width,height:d.style.height,padding:d.style.padding,margin:d.style.margin,style:d.style.cssText}),f?(d.style.position="fixed",d.style.width="100%",d.style.height="100%",d.style.padding="0 0",d.style.margin="0 0"):d.style.cssText=ff_embed_stack_style[h].style)}f||(ff_embed_stack=null)}}var ff_status={},ff_status_id=0,ff_embed_stack=null,ff_embed_stack_style=null;function player_widewin(){$("#bofqi").removeClass("webfullscreen");$("#bofqi").addClass("wide")}function heimu(d,c){$("#heimu");0==c?($("#heimu").hide(),$("#bofqi").removeClass("heimu")):($("#bofqi").addClass("heimu"),$("#heimu").css("opacity","."+d/10),$("#heimu").css("filter","alpha(opacity="+d+")"),$("#heimu").show())}function getAuthorInfo(){var f,d=parseInt(window.mid),h,g=!1;0<=$.inArray(d,window.AttentionList)&&(g=!0);$(".upinfo").length?(f=$(".upinfo"),h=$(".name",f).text(),f=$(".u-face img",f).attr("src")):($upinfo=$(".zu_play_info"),h=$(".upload_user a",f).attr("card"),f=$(".upload_user img",f).attr("src"));return{mid:d,uname:h,face:f,attention:g}}function flashChecker(){var f,d=!1,h=0;if(navigator.plugins&&0<navigator.plugins.length&&(f=navigator.plugins["Shockwave Flash"])){d=!0;f=f.description.split(" ");for(var g=0;g<f.length;++g){isNaN(parseInt(f[g]))||(h=parseInt(f[g]))}}return{hasFlash:d,flashVersion:h}}function loadHTML5(f,d){var h=null!=navigator.userAgent.match(/iPad/i)||null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/iPod/i),g=null!=navigator.userAgent.match(/Android/i);flashChecker().hasFlash||!h&&!g||(h=1==Number(d)?"":"#page="+d,!/iPad/.test(navigator.userAgent)&&"#html5"!=location.hash||"YESYESYES"==ChatGetSettings("bilibililover")?__GetCookie("nmr")&&"0"!=__GetCookie("nmr")||window.location.replace("/mobile/video/av"+f+".html"+h):($("#bofqi").html('<link type="text/css" href="//static.hdslb.com/css/simple.v2.min.css" rel="stylesheet" />'),$.getScript("//static.hdslb.com/js/simple.v2.min.js",function(){(new BiliH5Player).create({aid:f,page:d})}),$("#bofqi").prepend('<div class="main-inner"><div class="app-banner"><div class="app-banner-left"><div class="app-banner-title">\u4e0abilibili\u5ba2\u6237\u7aef</div><div class="app-banner-content">\u9ad8\u6e05\u52a8\u753b \u79bb\u7ebf\u89c2\u770b \u5e94\u6709\u5c3d\u6709</div></div><div class="app-banner-right"><a class="app-open-btn">\u7528\u5ba2\u6237\u7aef\u6253\u5f00</a><a class="app-dl-btn">\u7acb\u5373\u4e0b\u8f7d</a></div></div></div>'),$(".app-banner .app-open-btn").bindApplink({aid:f}),getDownloadUrl($(".app-banner .app-dl-btn"))))}var aid,cid,GrayManager={gray_flash_enable:!1,gray_html5_enable:!0,initialTime:+new Date,fixTime:0,overtime:30000,gray_config_flash:{cookie_name:"player_gray",new_player:"//static.hdslb.com/play200.swf",suffixes:["01","02","03","04","05"],track:{old:{click_event_name:"oldver_click",show_event_name:"oldver_show"},"new":{click_event_name:"newver_click",show_event_name:"newver_show"}}},gray_config_html5:{version:"baff6b13",track:{"new":{click_event_name:"HTML5_click",show_event_name:"HTML5_show"},old:{click_event_name:"Flash_click",show_event_name:"Flash_show"}}},initialized:!1,pageno:1,enable:!1,player_params:null,callbackFn:null,upgrade:void 0,cooperation:!1,iframe:!1,gray_flash:!1,gray_html5:!1,isSafari:/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(navigator.userAgent.toLowerCase())||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(navigator.userAgent.toLowerCase()),notice_info:{no_gray_flash:{title:"Flash \u64ad\u653e\u5668\u516c\u544a",content:'<b style="font-weight: bold;">\u672c\u6b21\u66f4\u65b0\uff1a</b><br/>1.\u3010\u65b0\u589e\u3011\u652f\u6301\u8bbe\u7f6e\u9ed8\u8ba4\u6e05\u6670\u5ea6<br/>2.\u3010\u4f18\u5316\u3011\u4fee\u590d\u4e86\u7ec4\u5408\u5267\u96c6\u5206P\u4e0d\u6b63\u786e\u7684\u95ee\u9898<br/>3.\u3010\u4f18\u5316\u3011\u4fee\u590d\u4e86\u9762\u677f\u5728\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\u7684\u663e\u793a<br/>\u82e5\u60a8\u5728\u64ad\u653e\u5668\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u6709\u4efb\u4f55\u95ee\u9898\u548c\u610f\u89c1\uff0c\u6b22\u8fce\u53cd\u9988\u7ed9\u6211\u4eec\uff0c\u6211\u4eec\u5c06\u6301\u7eed\u6539\u8fdb\u64ad\u653e\u5668\u4f53\u9a8c\u3002<br/>\u53e6\u62db\u8058HTML5\u5f00\u53d1\uff1a<a href="https://github.com/Bilibili/join-us#html5-\u64ad\u653e\u5668\u5f00\u53d1" target="_blank">https://github.com/Bilibili/join-us#html5-\u64ad\u653e\u5668\u5f00\u53d1</a><br/>Flash\u64ad\u653e\u5668\u53cd\u9988\u90ae\u7bb1\uff1a<a href="mailto:feedback@bilibili.com">feedback@bilibili.com</a> \u8bf7\u6ce8\u660e\u3010Flash\u64ad\u653e\u5668\u53cd\u9988\u3011<br/><span style="color: red;">*\u53cd\u9988\u95ee\u9898\u65f6\u5e0c\u671b\u80fd\u5e26\u4e0a\u60a8\u7684\u4f7f\u7528\u5e73\u53f0\u3001AV\u53f7\u3001\u7f51\u7edc\u8fd0\u8425\u5546</span><br/><a href="//www.bilibili.com/html/webplayer_history.html#flash" target="_blank">\u3010\u70b9\u51fb\u67e5\u770b\u7248\u672c\u8bb0\u5f55\u3011</a>'},gray_flash:{title:"Flash \u64ad\u653e\u5668\u516c\u544a",content:'\u82e5\u60a8\u5728\u64ad\u653e\u5668\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u6709\u4efb\u4f55\u95ee\u9898\u548c\u610f\u89c1\uff0c\u6b22\u8fce\u53cd\u9988\u7ed9\u6211\u4eec\uff0c\u6211\u4eec\u5c06\u6301\u7eed\u6539\u8fdb\u64ad\u653e\u5668\u4f53\u9a8c\u3002<br/>\u53e6\u62db\u8058HTML5\u5f00\u53d1\uff1a<a href="https://github.com/Bilibili/join-us#html5-\u64ad\u653e\u5668\u5f00\u53d1" target="_blank">https://github.com/Bilibili/join-us#html5-\u64ad\u653e\u5668\u5f00\u53d1</a><br/>Flash\u64ad\u653e\u5668\u53cd\u9988\u90ae\u7bb1\uff1a<a href="mailto:feedback@bilibili.com">feedback@bilibili.com</a> \u8bf7\u6ce8\u660e\u3010Flash\u64ad\u653e\u5668\u53cd\u9988\u3011<br/><span style="color: red;">*\u53cd\u9988\u95ee\u9898\u65f6\u5e0c\u671b\u80fd\u5e26\u4e0a\u60a8\u7684\u4f7f\u7528\u5e73\u53f0\u3001AV\u53f7\u3001\u7f51\u7edc\u8fd0\u8425\u5546</span><br/><a href="//www.bilibili.com/html/webplayer_history.html#flash" target="_blank">\u3010\u70b9\u51fb\u67e5\u770b\u7248\u672c\u8bb0\u5f55\u3011</a>'},gray_html5:{title:"HTML5\u64ad\u653e\u5668\u516c\u6d4b\u516c\u544a",content:'<b style="font-weight: bold;">\u672c\u6b21\u66f4\u65b0\uff1a</b><br/><b style="font-weight: bold;">1. \u65b0\u7248\u5f39\u5e55\u5c4f\u853d\u4e91\u540c\u6b65\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u5355\u72ec\u5206\u7c7b(\u539f\u6b63\u5219\u8868\u8fbe\u5f0f\u8bf7\u6309\u5206\u7c7b\u91cd\u65b0\u6dfb\u52a0\uff0c\u6216\u5728\u89c4\u5219\u6587\u4ef6\u5c06\u7c7b\u578b\u6539\u4e3ar\u91cd\u65b0\u5bfc\u5165)</b><br/><b style="font-weight: bold;">2. \u5386\u53f2\u5f39\u5e55\u6837\u5f0f\u4f18\u5316</b><br/>\u82e5\u60a8\u5728HTML5\u64ad\u653e\u5668\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u6709\u4efb\u4f55\u95ee\u9898\u548c\u610f\u89c1\uff0c\u6b22\u8fce\u53cd\u9988\u7ed9\u6211\u4eec\uff0c\u6211\u4eec\u5c06\u6301\u7eed\u6539\u8fdb\u64ad\u653e\u5668\u4f53\u9a8c\u3002<br/>1. \u4e0d\u652f\u6301\u5408\u4f5c\u64ad\u653e\u5668\u7684\u89c6\u9891\u64ad\u653e<br/>2. IE10\u53ca\u4e4b\u524d\u7248\u672c\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u4f7f\u7528HTML5\u64ad\u653e\u5668<br/>\u53e6\u62db\u8058HTML5\u5f00\u53d1\uff1a<a href="https://github.com/Bilibili/join-us#html5-\u64ad\u653e\u5668\u5f00\u53d1" target="_blank">https://github.com/Bilibili/join-us#html5-\u64ad\u653e\u5668\u5f00\u53d1</a><br/>\u64ad\u653e\u5668\u53cd\u9988\u90ae\u7bb1\uff1a<a href="mailto:feedback@bilibili.com">feedback@bilibili.com</a> \u8bf7\u6ce8\u660e\u3010HTML5\u64ad\u653e\u5668\u53cd\u9988\u3011<br/>QQ\u53cd\u9988\u7fa4\uff1a418984413<br/><span style="color: red;">*\u53cd\u9988\u95ee\u9898\u65f6\u5e0c\u671b\u80fd\u5e26\u4e0a\u60a8\u7684\u4f7f\u7528\u5e73\u53f0\u3001AV\u53f7\u3001\u7f51\u7edc\u8fd0\u8425\u5546</span><br/><a href="//www.bilibili.com/html/webplayer_history.html#html5" target="_blank">\u3010\u70b9\u51fb\u67e5\u770b\u7248\u672c\u8bb0\u5f55\u3011</a>'}},init:function(m,l,k,j){function h(){d._isDocumentHidden()||(d.fixTime=+new Date-d.hidden_start_time)}var d=this;if(this.initialized){return !1}$('<link rel="stylesheet" type="text/css" href="//static.hdslb.com/plugins/mCustomScrollbar/jquery.mCustomScrollbar.min.css" />').appendTo("body");this.initialized=!0;if(null!=navigator.userAgent.match(/iPad/i)&&"YESYESYES"!=ChatGetSettings("bilibililover")&&!/bangumi/.test(window.location.href)){return"function"===typeof j&&j(),!1}this.pageno=window.pageno||1;this.player_params=m;this.upgrade=l;this.callbackFn=k;m&&!m.match(/cid=(\d+)\&/)&&(this.cooperation=!0);/bangumi/.test(window.location.href)&&!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())?(document.domain="bilibili.com",d=this,this.isSafari?this._init(j):this.loadLocalStorage(function(){d._init(j)})):this._init(j);try{var f=this._getHiddenProp();if(f){var n=f.replace(/[H|h]idden/,"")+"visibilitychange";this.hidden_start_time=+new Date;document.addEventListener(n,h)}}catch(i){console.warn(i)}},_init:function(b){if(this.storageLoaded){return !1}this.storageLoaded=!0;this.gray_judge_flash();this.gray_judge_html5();1==ChatGetSettings("defaulth5")?this.gray_html5?(this.enable=!0,this.gray_initial_html5()):this.gray_flash?(this.enable=!0,this.gray_initial_flash()):this.no_gray_initial():this.gray_flash?(this.enable=!0,this.gray_initial_flash()):this.gray_html5?(this.enable=!0,this.gray_initial_html5()):this.no_gray_initial();"function"===typeof b&&b()},reload:function(d){try{window.swfobject&&window.swfobject.removeSWF("player_placeholder"),window.player&&window.player.destroy()}catch(c){console.log(c)}this.initialReset();if(this.player_params=d||this.player_params){window.aid=d.match(/aid=(\d+)/)[1],window.cid=d.match(/cid=(\d+)\&/),window.cid&&(window.cid=window.cid[1])}this.gray_html5&&1==ChatGetSettings("defaulth5")?this.gray_loader_html5():this.gray_loader_flash()},storageTimer:null,loadLocalStorage:function(e){var d=this,f=["bilibililover","defaulth5","firstentergraytest","bilibili_player_settings"];this._iframe=document.createElement("iframe");this._iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;";this._iframe.src="//www.bilibili.com/html/iframemessage.html";document.body.appendChild(this._iframe);this._iframe.addEventListener&&this._iframe.addEventListener("load",function(){try{for(var b in f){window.localStorage.setItem(f[b],d._iframe.contentWindow.localStorage.getItem(f[b]))}}catch(a){}clearTimeout(d.storageTimer);e()});this.storageTimer=setTimeout(function(){e()},500)},setLocalStorage:function(f,d){try{ChatSaveSettings(f,d)}catch(h){}if(this._iframe){try{this._iframe.contentWindow.localStorage.setItem(f,d)}catch(g){}}},GetUrlValue:function(d){d=RegExp("(^|&)"+d+"=([^&]*)(&|$)","i");d=window.location.search.substr(1).match(d);if(null!=d){try{return decodeURIComponent(d[2])}catch(c){}}return null},gray_loader:function(f,d,j,i,h,g){this.gray_html5&&("html5"===i||!i&&1==ChatGetSettings("defaulth5"))?this.gray_loader_html5():this.gray_loader_flash(h)},update_params:function(e){e&&this.search_new_cid();e={};player_params=this.player_params.split("&");for(var d=0;d<player_params.length;d++){if(""!=player_params[d]){var f=player_params[d].split("=");e[f[0]]=f[1]}}window.aid&&(e.aid=window.aid);window.cid&&(e.cid=window.cid);this.GetUrlValue("d")&&(e.d=this.GetUrlValue("d"));this.GetUrlValue("t")&&(e.t=this.GetUrlValue("t"));this.GetUrlValue("lastplaytime")&&(e.lastplaytime=this.GetUrlValue("lastplaytime"));return e},search_new_cid:function(){var b=this;"undefined"===typeof window.pageno?window.pageno=this.pageno:window.pageno!=this.pageno&&$.ajax({url:"//www.bilibili.com/widget/getPageList?aid="+window.aid,cache:!0,type:"get",xhrFields:{withCredentials:!0},async:!1,dataType:"json",success:function(a){if(a){for(var d in a){a[d].page==window.pageno&&(window.cid=a[d].cid,b.pageno=window.pageno)}}},error:function(){}})},no_gray_initial:function(){$("#bofqi .b-player-gray").remove();var e=this;this.notice=$('<div style="position: fixed;z-index: 10035; top: 50%; margin-top: -200px; left: 50%; width: 540px; margin-left: -320px; padding: 30px 50px; background-color: #fff; border-radius: 6px; box-shadow: 1px 1px 40px 0px rgba(0,0,0,0.6);"><iframe scrolling="no" border="0" frameborder="no" framespacing="0" style="position: absolute; width: 100%;height: 100%; z-index: -1; left: 0; top: 0;"></iframe><div class="gray-panel-header" style="font-size: 16px; color: #222; text-align: center; margin-bottom: 24px; font-weight: bold;">'+this.notice_info.no_gray_flash.title+'</div><div class="gray-panel-content" style="font-size: 14px; color: #222; line-height: 24px;">'+this.notice_info.no_gray_flash.content+'</div><div class="b-btn" style="margin: 20px auto 0 auto; width: 120px; height: 30px; line-height: 30px; font-size: 14px;">\u6211\u77e5\u9053\u4e86</div></div>').appendTo("body").hide();this.notice.find(".b-btn").click(function(){e.notice.hide()});var d=$("#bofqi").parent(),f=$('<div class="bgray-btn-wrap"></div>').prependTo(d);$("<style>.player-wrapper {position: relative;} .player-fullscreen-fix {position: fixed;top: 0;left: 0;margin: 0;padding: 0;width: 100%;height: 100%;}.player-fullscreen-fix #bofqi .player {position: fixed!important;border-radius: 0;z-index: 100000!important;left: 0;top: 0;width: 100%!important;height: 100%!important;}.bgray-btn-wrap {position: absolute; top: 10px; left: 50%; margin-left: 490px; width: 70px; height: 200px;} .widescreen .bgray-btn-wrap {margin-left: 580px;} .bgray-btn {transition: all 0.3s; cursor: pointer; margin: 10px 0; background-color: #fff; text-align: center; padding: 7px 5px; display: block; left: 100%; font-size: 12px; line-height: 14px; margin-left: 10px; width: 20px; height: 58px; border-radius: 4px; border: 1px solid #e5e9ef; color: #99a2aa;} .bgray-btn:hover {color: #6d757a; border-color: #6d757a;} .bgray-btn.active {cursor: default; color: #00a1d6; border-color: #00a1d6;}"+(d.hasClass("movie_play")?".movie_play {overflow: visible;} .bgray-btn-wrap {top: -10px;} #bofqi {box-shadow: 0 0 0;}":"")+".bgray-line {display: none; width: 42px; margin: 0 auto; border-bottom: 1px solid #e5e9ef;}.bgray-btn {display: none;} .bgray-btn.show {display: block;}</style>").appendTo("head");this.notice_btn=$('<div class="bgray-btn show">\u610f\u89c1<br/>\u53cd\u9988</div>').appendTo(f).click(function(){e.notice.show()})},gray_judge_flash:function(){var e=this.gray_config_flash.cookie_name;if(utils.isUndefined(this.upgrade)||""===this.upgrade){this.upgrade="false"!==utils.cookie.get(e)}if(!this.gray_flash_enable||!this.player_params){return this.gray_flash=!1}var d;try{d=utils.cookie.get("DedeUserID").slice(-2),this.gray_flash=-1<$.inArray(d,this.gray_config_flash.suffixes)}catch(f){this.gray_flash=!1}return this.gray_flash},gray_initial_flash:function(){$("#bofqi .b-player-gray").remove();var f=this,d=this.gray_config_flash.track,i=this.gray_config_flash.cookie_name;this.notice=$('<div style="position: fixed;z-index: 10035; top: 50%; margin-top: -190px; left: 50%; width: 540px; margin-left: -320px; padding: 30px 50px; background-color: #fff; border-radius: 6px; box-shadow: 1px 1px 40px 0px rgba(0,0,0,0.6);"><iframe scrolling="no" border="0" frameborder="no" framespacing="0" style="position: absolute; width: 100%;height: 100%; z-index: -1; left: 0; top: 0;"></iframe><div class="gray-panel-header" style="font-size: 16px; color: #222; text-align: center; margin-bottom: 24px; font-weight: bold;">'+this.notice_info.gray_flash.title+'</div><div class="gray-panel-content" style="font-size: 14px; color: #222; line-height: 24px;">'+this.notice_info.gray_flash.content+'</div><div class="b-btn" style="margin: 20px auto 0 auto; width: 120px; height: 30px; line-height: 30px; font-size: 14px;">\u6211\u77e5\u9053\u4e86</div></div>').appendTo("body").hide();this.notice.find(".b-btn").click(function(){f.notice.hide()});var h=$("#bofqi").parent(),g=$('<div class="bgray-btn-wrap"></div>').prependTo(h);$("<style>.player-wrapper {position: relative;} .player-fullscreen-fix {position: fixed;top: 0;left: 0;margin: 0;padding: 0;width: 100%;height: 100%;}.player-fullscreen-fix #bofqi .player {position: fixed!important;border-radius: 0;z-index: 100000!important;left: 0;top: 0;width: 100%!important;height: 100%!important;}.bgray-btn-wrap {position: absolute; top: 10px; left: 50%; margin-left: 490px; width: 70px; height: 200px;} .widescreen .bgray-btn-wrap {margin-left: 580px;} .bgray-btn {transition: all 0.3s; cursor: pointer; margin: 10px 0; background-color: #fff; text-align: center; padding: 7px 5px; display: block; left: 100%; font-size: 12px; line-height: 14px; margin-left: 10px; width: 20px; height: 58px; border-radius: 4px; border: 1px solid #e5e9ef; color: #99a2aa;} .bgray-btn:hover {color: #6d757a; border-color: #6d757a;} .bgray-btn.active {cursor: default; color: #00a1d6; border-color: #00a1d6;}"+(h.hasClass("movie_play")?".movie_play {overflow: visible;} .bgray-btn-wrap {top: -10px;} #bofqi {box-shadow: 0 0 0;} .movie_over {z-index: 10021;}":"")+".bgray-line {display: none; width: 42px; margin: 0 auto; border-bottom: 1px solid #e5e9ef;}.bgray-btn {display: none;} .bgray-btn.show {display: block;}</style>").appendTo("head");this.notice_btn=$('<div class="bgray-btn show">\u610f\u89c1<br/>\u53cd\u9988</div>').appendTo(g).click(function(){f.notice.show()});$('<div class="bgray-line"></div>').prependTo(g);this.flash_btn=$('<div class="bgray-btn '+(this.upgrade?"":"active")+'" type="old">\u65e7\u7248<br/>\u64ad\u653e\u5668</div>').prependTo(g);this.flash_new_btn=$('<div class="bgray-btn '+(this.upgrade?"active":"")+'" type="new">\u65b0\u7248<br/>\u64ad\u653e\u5668</div>').prependTo(g);f=this;g.find(".bgray-btn").click(function(){var a=$(this).attr("type");a&&!$(this).hasClass("active")&&($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_flash("new"===a),rec_rp("event",d[a].click_event_name),utils.cookie.set(i,"old"===a?!1:!0,7))});rec_rp("event",this.upgrade?d["new"].show_event_name:d.old.show_event_name);this.html5_btn=$('<div class="bgray-btn">HTML5<br/>\u64ad\u653e\u5668</div>').prependTo(g).hide().click(function(a,e){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_html5(),e||rec_rp("event",f.gray_config_html5.track["new"].click_event_name))})},initialReset:function(){this.initialTime=+new Date;this.fixTime=0;this._track_load=this._track_init=!1},gray_loader_flash:function(b){this.upgrade="undefined"===typeof b||""===b?this.gray_flash?"false"!==utils.cookie.get(this.gray_config_flash.cookie_name):!1:b;1==ChatGetSettings("defaulth5")&&this.setLocalStorage("defaulth5",0);this.iframe?$("#bofqi").html('<iframe height="482" width="950" class="player" src="https://secure.bilibili.com/secure,cid='+window.cid+"&aid="+window.aid+'" scrolling="no" border="0" frameborder="no" framespacing="0" onload="window.securePlayerFrameLoaded=true"></iframe><img src="https://secure.bilibili.com/images/grey.gif" id="img_ErrCheck" style="display:none" /><script type="text/javascript" src="//static.hdslb.com/js/page.player_error.js">\x3c/script>'):(b=this.update_params(),$("#bofqi").html('<div id="player_placeholder" class="player"></div>'),swfobject.embedSWF(this.upgrade?this.gray_config_flash.new_player:"//static.hdslb.com/play.swf","player_placeholder","950","482","0","",b,{bgcolor:"#ffffff",allowfullscreeninteractive:"true",allowfullscreen:"true",quality:"high",allowscriptaccess:"always",wmode:/Firefox\/49\.0/.test(navigator.userAgent)?"opaque":"direct"},{"class":"player"},this.callbackFn),this.flash_loader_timeout(),this.gray_flash_compatible())},flash_loader_timeout:function(){var b=this;this.flash_loader_timer=setTimeout(function(){try{b.html5_btn&&(!b._isDocumentHidden()&&b.gray_html5&&!b.iframe&&"0"!=ChatGetSettings("defaulth5"))&&(b._sendInitialTime("html5",+new Date-performance.timing.navigationStart,"overtime_change"),b.initialReset(),b.changeNotice("html5"),b.html5_btn.click())}catch(a){console.warn(a)}},this.overtime)},gray_flash_compatible:function(){window.player={};var e={video_media_buffer:"jwplayerMediaBuffer",video_media_buffer_full:"jwplayerMediaBufferFull",video_media_ended:"jwplayerMediaComplete",video_media_error:"jwplayerMediaError",video_media_loaded:"jwplayerMediaLoaded",video_media_mute:"jwplayerMediaMute",video_media_seek:"jwplayerMediaSeek",video_media_time:"jwplayerMediaTime",video_media_volume:"jwplayerMediaVolume"},d={reloadAccess:"mukio_reloadAccess",play:"jwPlay",pause:"jwPause",stop:"jwStop",seek:"jwSeek",prev:"jwPlaylistPrev",next:"jwPlaylistNext",getBufferRate:"jwGetBuffer",getDuration:"jwGetDuration",isFullScreen:"jwGetFullscreen",getWidth:"jwGetWidth",getHeight:"jwGetHeight",isMute:"jwGetMute",setMute:"jwSetMute",getPlaylist:"jwGetPlaylist",getPlaylistIndex:"jwGetPlaylistIndex",getCurrentTime:"jwGetPosition",getState:"jwGetState",getVersion:"jwGetVersion",volume:"jwGetVolume|jwSetVolume"},f;for(f in d){(function(g,c){window.player[g]=function(){var a=document.getElementById("player_placeholder");if(a){if("function"===typeof a[c]){return a[c].apply(a,arguments)}if("volume"===g&&"function"===typeof a.volume){return 0===arguments.length?a.jwGetVolume.apply(a,arguments):a.jwSetVolume.apply(a,arguments)}}}})(f,d[f])}window.player.addEventListener=function(a,i){try{"function"===typeof i&&(i=""+i)}catch(g){i="function(){}"}var h=document.getElementById("player_placeholder");e[a]&&h&&h.jwAddEventListener&&h.jwAddEventListener(e[a],i)};window.player.removeEventListener=function(a){e[a]&&flashBox&&flashBox.jwRemoveEventListener&&flashBox.jwRemoveEventListener(e[a])}},gray_judge_html5:function(){if(!this.gray_html5_enable||/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||/Trident/i.test(navigator.userAgent)&&/Windows NT 6/.test(navigator.userAgent)){return this.gray_html5=!1}(/linux/i.test(navigator.userAgent.toLowerCase())||/Mac OS X[\s\_\-\/](\d+[\.\-\_]\d+[\.\-\_]?\d*)/i.test(navigator.userAgent)||!flashChecker().hasFlash)&&null==ChatGetSettings("defaulth5")&&this.setLocalStorage("defaulth5",1);if($("#bofqi").length){if($("#bofqi").find("iframe.player").length&&!$("#bofqi").find("iframe.player").hasClass("bilibiliHtml5Player")){var e=$("iframe.player").attr("src").match(/aid=(\d+)/),d=$("iframe.player").attr("src").match(/cid=(\d+)\&/),f=$("iframe.player").attr("src").match(/pre_ad=(\d+)/);e&&(e[1]&&d&&d[1])&&(window.aid=e[1],window.cid=d[1],this.iframe=this.gray_html5=!0,this.player_params="cid="+d[1]+"&aid="+e[1]+"&pre_ad="+(f?f[1]:"0"))}else{this.cooperation||$("#bofqi").find("embed").length||(this.gray_html5=!0)}}return this.gray_html5},gray_initial_html5:function(){var f=this,d=this.gray_config_html5.track,i=this.gray_config_html5.track;this.notice=$('<div style="position: fixed;z-index: 10035; top: 50%; margin-top: -220px; left: 50%; width: 540px; margin-left: -320px; padding: 30px 50px; background-color: #fff; border-radius: 6px; box-shadow: 1px 1px 40px 0px rgba(0,0,0,0.6);"><iframe scrolling="no" border="0" frameborder="no" framespacing="0" style="position: absolute; width: 100%;height: 100%; z-index: -1; left: 0; top: 0;"></iframe><div class="gray-panel-header" style="font-size: 16px; color: #222; text-align: center; margin-bottom: 24px; font-weight: bold;">'+this.notice_info.gray_html5.title+'</div><div class="gray-panel-content" style="font-size: 14px; color: #222; line-height: 24px;">'+this.notice_info.gray_html5.content+'</div><div class="b-btn" style="margin: 20px auto 0 auto; width: 120px; height: 30px; line-height: 30px; font-size: 14px;">\u6211\u77e5\u9053\u4e86</div></div>').appendTo("body").hide();this.notice.find(".b-btn").click(function(){f.notice.hide()});flashChecker().hasFlash||(f.setLocalStorage("defaulth5",1),$("<style>.bgray-btn-wrap {display:none;}</style>").appendTo("head"));var h=$("#bofqi").parent(),g=$('<div class="bgray-btn-wrap"></div>').prependTo(h);$("<style>.player-wrapper {position: relative;} .player-fullscreen-fix {position: fixed;top: 0;left: 0;margin: 0;padding: 0;width: 100%;height: 100%;}.player-fullscreen-fix #bofqi .player {position: fixed!important;border-radius: 0;z-index: 100000!important;left: 0;top: 0;width: 100%!important;height: 100%!important;}.bgray-btn-wrap {position: absolute; top: 10px; left: 50%; margin-left: 490px; width: 70px; height: 200px;} .widescreen .bgray-btn-wrap {margin-left: 580px;} .bgray-btn {transition: all 0.3s; cursor: pointer; margin: 10px 0; background-color: #fff; text-align: center; padding: 7px 5px; display: block; left: 100%; font-size: 12px; line-height: 14px; margin-left: 10px; width: 20px; height: 58px; border-radius: 4px; border: 1px solid #e5e9ef; color: #99a2aa;} .bgray-btn:hover {color: #6d757a; border-color: #6d757a;} .bgray-btn.active {cursor: default; color: #00a1d6; border-color: #00a1d6;}"+(h.hasClass("movie_play")?".movie_play {overflow: visible;} .bgray-btn-wrap {top: -10px;} #bofqi {box-shadow: 0 0 0;} .movie_over {z-index: 10021;}":"")+".bgray-line {display: none; width: 42px; margin: 0 auto; border-bottom: 1px solid #e5e9ef;}.bgray-btn {display: none;} .bgray-btn.show {display: block;}</style>").appendTo("head");this.notice_btn=$('<div class="bgray-btn show">\u610f\u89c1<br/>\u53cd\u9988</div>').appendTo(g).click(function(){f.notice.show()});$('<div class="bgray-line"></div>').prependTo(g);this.flash_btn=$('<div class="bgray-btn">Flash<br/>\u64ad\u653e\u5668</div>').prependTo(g).click(function(){$(this).hasClass("active")||(window.player&&window.player.destroy&&window.player.destroy(),$(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_flash(!1),rec_rp("event",i.old.click_event_name),utils.cookie.set(f.gray_config_flash.cookie_name,!1,7))});this.html5_btn=$('<div class="bgray-btn">HTML5<br/>\u64ad\u653e\u5668</div>').prependTo(g).click(function(b,a){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_html5(),"v0.9.7.1"!=ChatGetSettings("firstentergraytest")&&(f.isSafari&&"bangumi.bilibili.com"==window.location.host||1!=ChatGetSettings("defaulth5")||f.notice_btn.click(),f.setLocalStorage("firstentergraytest","v0.9.7.1")),a||rec_rp("event",d["new"].click_event_name))});this.flash_new_btn=$('<div class="bgray-btn '+(this.upgrade?"active":"")+'" type="new">\u65b0\u7248<br/>\u64ad\u653e\u5668</div>').prependTo(g).hide().click(function(){$(this).siblings().removeClass("active");$(this).addClass("active");f.initialReset();f.gray_loader_flash(!0);rec_rp("event",i["new"].click_event_name);utils.cookie.set(f.gray_config_flash.cookie_name,!0,7)});1==ChatGetSettings("defaulth5")&&this.iframe?($("#bofqi").find("iframe.player").remove(),this.html5_btn.trigger("click",!0),rec_rp("event",d["new"].show_event_name)):1==ChatGetSettings("defaulth5")?(this.html5_btn.addClass("active"),rec_rp("event",d["new"].show_event_name)):(this.upgrade?(this.flash_new_btn.addClass("active"),rec_rp("event",i["new"].show_event_name)):(this.flash_btn.addClass("active"),rec_rp("event",i.old.show_event_name)),this.changeNotice("flash"))},gray_loader_html5:function(){var f=this;f.setLocalStorage("defaulth5",1);if(/bangumi/.test(window.location.href)){var d=this.update_params(!0);d.p=utils.HashManage.get("page")||1;d.crossDomain=1;var h=[],g;for(g in d){h.push(g+"="+d[g])}h=h.join("&");window.Html5IframeInitialized=function(){f.gray_html5_compatible();loadProgress.end()};$("#bofqi").html('<iframe class="player bilibiliHtml5Player" style="position: relative;" src="//www.bilibili.com/html/html5player.html?'+h+'" scrolling="no" border="0" frameborder="no" framespacing="0"></iframe>');loadProgress.init(d)}else{d=this.update_params(!0),d.p=window.pageno||utils.HashManage.get("page")||1,$("#bofqi").html('<div id="player_placeholder" class="player"></div>'),$.ajax({url:"//static.hdslb.com/player/js/bilibiliPlayer.min.js?v="+this.gray_config_html5.version,cache:!0,type:"get",dataType:"script",beforeSend:function(){$("#bofqi").html('<div class="player"><div id="bilibiliPlayer"></div></div><iframe style="display: none"></iframe><div id="player_placeholder"></div>');loadProgress.init(d)},success:function(){loadProgress.end();/iPad/.test(navigator.userAgent)&&($("#bofqi").prepend('<div class="main-inner"><div class="app-banner"><div class="app-banner-left"><div class="app-banner-title">\u4e0abilibili\u5ba2\u6237\u7aef</div><div class="app-banner-content">\u9ad8\u6e05\u52a8\u753b \u79bb\u7ebf\u89c2\u770b \u5e94\u6709\u5c3d\u6709</div></div><div class="app-banner-right"><a class="app-open-btn">\u7528\u5ba2\u6237\u7aef\u6253\u5f00</a><a class="app-dl-btn">\u7acb\u5373\u4e0b\u8f7d</a></div></div></div>'),$(".app-banner .app-open-btn").bindApplink({aid:aid}),getDownloadUrl($(".app-banner .app-dl-btn")));window.player=new bilibiliPlayer(d);f.gray_html5_compatible()}})}},gray_html5_compatible:function(){var a={jwplayerMediaBuffer:"video_media_buffer",jwplayerMediaBufferFull:"video_media_buffer_full",jwplayerMediaComplete:"video_media_ended",jwplayerMediaError:"video_media_error",jwplayerMediaLoaded:"video_media_loaded",jwplayerMediaMute:"video_media_mute",jwplayerMediaSeek:"video_media_seek",jwplayerMediaTime:"video_media_time",jwplayerMediaVolume:"video_media_volume"},b={mukio_reloadAccess:"reloadAccess",jwPlay:"play",jwPause:"pause",jwStop:"stop",jwSeek:"seek",jwPlaylistPrev:"prev",jwPlaylistNext:"next",jwGetBuffer:"getBufferRate",jwGetDuration:"getDuration",jwGetFullscreen:"isFullScreen",jwGetWidth:"getWidth",jwGetHeight:"getHeight",jwGetMute:"isMute",jwSetMute:"setMute",jwGetPlaylist:"getPlaylist",jwGetPlaylistIndex:"getPlaylistIndex",jwGetPosition:"getCurrentTime",jwGetState:"getState",jwGetVersion:"getVersion",jwGetVolume:"volume",jwSetVolume:"volume"},c=$("#bofqi").find("#player_placeholder");0===c.length&&(c=$('<div id="player_placeholder"></div>').appendTo($("#bofqi")));var c=c[0],e;for(e in b){(function(a,b){c[a]=function(){if(window.player&&"function"===typeof window.player[b]){return window.player[b].apply(window.player,arguments)}}})(e,b[e])}c.jwAddEventListener=function(b,c){try{"function"!==typeof c&&(c=eval("("+c+")"))}catch(e){c=function(){}}a[b]&&window.player&&window.player.addEventListener&&window.player.addEventListener(a[b],c)};c.jwRemoveEventListener=function(b){a[b]&&window.player&&window.player.removeEventListener&&window.player.removeEventListener(a[b])};"function"===typeof this.callbackFn&&c.jwAddEventListener("jwplayerMediaLoaded",this.callbackFn)},changeNotice:function(e){"flash"!==e||this.gray_flash||(e="no_gray_flash");var d={html5:"gray_html5",flash:"gray_flash",no_gray_flash:"no_gray_flash"},f={html5:"-220px",flash:"-190px",no_gray_flash:"-200px"};this.notice&&d[e]&&(this.notice.find(".gray-panel-header").html(this.notice_info[d[e]].title),this.notice.find(".gray-panel-content").html(this.notice_info[d[e]].content),this.notice.css("margin-top",f[e]))},loadedCallback:function(d){clearTimeout(this.flash_loader_timer);var c=+new Date-this.initialTime-this.fixTime;this._sendInitialTime(d,c,"loaded_time");return c},initialCallback:function(d){clearTimeout(this.flash_loader_timer);var c=+new Date-this.initialTime-this.fixTime;this._sendInitialTime(d,c);return c},initCallback:function(d){clearTimeout(this.flash_loader_timer);var c=+new Date-this.initialTime-this.fixTime;this._sendInitialTime(d,c);return c},loadExtraMenuConfig:function(d){var c=[];"flash"===d||"flash_gray"===d?(this.gray_html5&&c.push({label:"HTML5\u64ad\u653e\u5668",id:"change_h5"}),this.gray_flash?this.upgrade?(c.push({label:"\u65b0\u7248\u64ad\u653e\u5668",id:"change_new_flash",active:!0}),c.push({label:"\u65e7\u7248\u64ad\u653e\u5668",id:"change_flash"})):(c.push({label:"\u65b0\u7248\u64ad\u653e\u5668",id:"change_new_flash"}),c.push({label:"\u65e7\u7248\u64ad\u653e\u5668",id:"change_flash",active:!0})):this.gray_html5&&c.push({label:"Flash\u64ad\u653e\u5668",id:"change_flash",active:!0})):flashChecker().hasFlash&&(c.push({label:"HTML5\u64ad\u653e\u5668",id:"change_h5",active:!0}),this.gray_flash?(c.push({label:"\u65b0\u7248Flash\u64ad\u653e\u5668",id:"change_new_flash"}),c.push({label:"\u65e7\u7248Flash\u64ad\u653e\u5668",id:"change_flash"})):c.push({label:"Flash\u64ad\u653e\u5668",id:"change_flash"}));return{ver:"20161115",menuItems:c}},clickMenu:function(d){var c=this;setTimeout(function(){"change_h5"===d&&c.html5_btn?(c.initialReset(),c.changeNotice("html5"),c.html5_btn.click()):"change_flash"===d&&c.flash_btn?(c.initialReset(),c.changeNotice("flash"),c.flash_btn.click()):"change_new_flash"===d&&c.flash_new_btn&&(c.initialReset(),c.changeNotice("flash"),c.flash_new_btn.click())},0);return !0},_sendInitialTime:function(e,d,f){f||(f="initial_time");if(this._track_init&&this._track_load||this._track_init&&"initial_time"==f){return !1}"initial_time"==f?this._track_init=!0:"loaded_time"==f&&(this._track_load=!0);$.ajax({url:"//data.bilibili.com/v/flashplay/"+("html5"==e?"h5_player_op":"flash_play_op"),data:{pname:window.pageno||1,mid:window.uid||"",statue:1,playmethod:0,avid:aid,eventparam:d,progress:0,displayid:+new Date,eventid:f,trackerid:"",cid:cid,fver:e,seasonid:"",epid:"",videotype:1,fid:"web_player"},xhrFields:{withCredentials:!0},type:"get"})},_getHiddenProp:function(){var d=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var c=0;c<d.length;c++){if(d[c]+"Hidden" in document){return d[c]+"Hidden"}}return null},_isDocumentHidden:function(){var b=this._getHiddenProp();return b?document[b]:!1}};function EmbedPlayer(g,d,l,k,j,h){1<$("#bofqi").find("#player_placeholder").length&&$("#bofqi").find("#player_placeholder").eq(1).remove();var i=$("#bofqi").contents().filter(function(){return 3==this.nodeType}),f=i.text().match(/\[flashvars\](.*)\[\/flashvars\]/);null!=f&&(l=l+"&"+f[1],i.remove());l&&(aid=l.match(/aid=(\d+)/)[1],(cid=l.match(/cid=(\d+)\&/))&&(cid=cid[1]));GrayManager.init(l,j,h,function(){if(!GrayManager.startTimeSend){GrayManager.startTimeSend=!0;try{window.performance&&(window.performance.timing&&window.performance.timing.navigationStart)&&GrayManager._sendInitialTime(1==ChatGetSettings("defaulth5")?"html5":"flash",+new Date-performance.timing.navigationStart,"start_time")}catch(c){}}if(GrayManager.enable){GrayManager.gray_loader(g,d,l,k,j,h)}else{var e={};l=l.split("&");for(var a=0;a<l.length;a++){if(""!=l[a]){var b=l[a].split("=");e[b[0]]=b[1]}}$("#bofqi").html('<div id="player_placeholder" class="player"></div>');swfobject.embedSWF(d,"player_placeholder","950","482","0","",e,{bgcolor:"#ffffff",allowfullscreeninteractive:"true",allowfullscreen:"true",quality:"high",allowscriptaccess:"always",wmode:/Firefox\/49\.0/.test(navigator.userAgent)?"opaque":"direct"},{"class":"player"},h);GrayManager.gray_flash_compatible()}});return !1}var loadProgress={init:function(e){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1000/60)}}();window.cancelNextRequestAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;this.timer&&window.cancelNextRequestAnimationFrame(this.timer);this._timer&&window.cancelNextRequestAnimationFrame(this._timer);this.times=1;this.per=0;var d=$("#bofqi").width();0<$(".playerLoadProgress").length&&$(".playerLoadProgress").remove();$("head").append('<style class="playerLoadProgress">'+this.publicStyle+"</style>");try{"1"==e.as_wide||JSON.parse(localStorage.bilibili_player_settings).video_status.widescreensave&&JSON.parse(localStorage.bilibili_player_settings).video_status.iswidescreen?1160<=d?$(".playerLoadProgress").append(this.styleList.styleWide):1160>d&&(680>=d?$(".playerLoadProgress").append(this.styleList.styleWideNarrowOffline):680<d&&860>=d?$(".playerLoadProgress").append(this.styleList.styleWideOffline):$(".playerLoadProgress").append(this.styleList.styleWideNarrow)):1160<=d?$(".playerLoadProgress").append(this.styleList.styleCommon):1160>d&&$(".playerLoadProgress").append(this.styleList.styleCommonNarrow)}catch(f){1160<=d?$(".playerLoadProgress").append(this.styleList.styleCommon):1160>d&&$(".playerLoadProgress").append(this.styleList.styleCommonNarrow)}$("#bofqi").append(this.content);this.start()},content:'<div class="bilibili-player-video-mask-bg"></div><div class="bilibili-player-video-load-wrap"><div class="bilibili-player-video-load-content"><div class="bilibili-player-video-load-tv"><div class="bilibili-player-video-load-mask"></div><img class="small-tv-ico" src="data:image/gif;base64,R0lGODlhWgBaALMOAHR0dAICAnd3dwEBAXh4eAMDAwkJCQ0NDQsLCxwcHA4ODggICHl5eQAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiYWE1ODg5ZS1jN2RmLTRmZmUtYjkzOS0wMmVkMTZhNmNjZDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0I2ODI2NjA1NzhGMTFFNkEyMEVDNzhEOUY1RkQxRjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0I2ODI2NUY1NzhGMTFFNkEyMEVDNzhEOUY1RkQxRjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjljYjgzNjY2LWYxYWUtNGMyZi1hMGEwLThhODJmYjIxM2U0MyIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmU1NDE3YzFmLTllODAtMTE3OS04NjdiLWUy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"></div><span class="bilibili-player-video-load-progress-title">Loading(<span class="bilibili-player-video-load-percent">0%</span>)...</span></div></div>',publicStyle:'.bilibili-player-video-mask-bg{width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgb(255,255,255)}.bilibili-player-video-load-wrap{width:860px;height:564px;position:absolute;top:0;left:0;z-index: 9999}.bilibili-player-video-load-content{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width: 178px;height:100px}.bilibili-player-video-load-tv{margin-top:55px;width:90px;height:90px;overflow:hidden;position:relative;margin:0 auto;}.bilibili-player-video-load-mask{width:90px;height:90px;background:rgba(255,255,255,.4);position:absolute;top:0;left:0}.bilibili-player-video-load-progress-title{white-space:nowrap;font-size:28px;font-family:"Times New Roman"}',styleList:{styleCommon:".bilibili-player-video-load-wrap{width:860px;height:564px;}.bilibili-player-video-load-tv{margin-top:55px;}",styleCommonNarrow:".bilibili-player-video-load-wrap{width:680px;height:556px;}.bilibili-player-video-load-tv{margin-top:-3px;}",styleWide:".bilibili-player-video-load-wrap{width:1160px;height:737px;}.bilibili-player-video-load-tv{margin-top:-29px;}",styleWideNarrow:".bilibili-player-video-load-wrap{width:980px;height:588px;}.bilibili-player-video-load-tv{margin-top:-29px;}",styleWideOffline:".bilibili-player-video-load-wrap{width:860px;height:564px;}.bilibili-player-video-load-tv{margin-top:-3px;}",styleWideNarrowOffline:".bilibili-player-video-load-wrap{width:680px;height:556px;}.bilibili-player-video-load-tv{margin-top:-38px}"},times:1,per:0,timer:0,_timer:0,start:function(){var d=this,c=function(){Math.log(d.times);d.per=80>=d.per?Math.floor(100*(Math.log(d.times)/Math.log(15.6))):d.per+0.03;$(".bilibili-player-video-load-mask").css("height",100-Math.floor(d.per)+"%");$(".bilibili-player-video-load-percent").html(Math.floor(d.per)+"%");d.times++;99>Math.floor(d.per)&&(d.timer=window.requestAnimationFrame(c))};window.requestAnimationFrame(c)},end:function(){function f(){$(".bilibili-player-video-panel-image-detail")&&$(".small-tv-ico").hide();d.per+=g;100<=d.per&&(d.per=100);$(".bilibili-player-video-load-mask").css("height",100-Math.floor(d.per)+"%");$(".bilibili-player-video-load-percent").html(Math.floor(d.per)+"%");100>Math.floor(d.per)?d._timer=window.requestAnimationFrame(f):($(".bilibili-player-video-load-percent").html("100%"),$(".bilibili-player-video-load-mask").css("height","0%"),setTimeout(function(){$(".bilibili-player-video-load-wrap").remove()},1000/60))}var d=this;$(".bilibili-player-video-mask-bg").remove();var h=Math.ceil(100-d.per),g=1;0.3<h/60&&(g=Math.ceil(h/20));window.requestAnimationFrame(f)}};$(function(){/bangumi/.test(window.location.href)||GrayManager.init()});